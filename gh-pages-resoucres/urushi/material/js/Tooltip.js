define("Tooltip",["Urushi","materialConfig","Base","text!tooltipTemplate"],function(t,o,i,e){"use strict";var s={ID_PREFIX:"urushi.Tooltip",EMBEDDED:{tooltipClass:"",additionalClass:"",position:""},POSITION_VALID:{left:!0,right:!0,top:!0,bottom:!0},MARGIN:2,EVENT_ON:"mouseover",EVENT_OFF:"mouseout"},n=0;return i.extend({template:void 0,embedded:void 0,isShown:void 0,position:void 0,on:void 0,off:void 0,duration:void 0,init:function(t){t=t||{},this._super(t),this.setParent(t.parentNode),this.setContent(t.content),this.setPosition(t.position),this.setOn(t.on),this.setOff(t.off)},_initProperties:function(t){this.template=e,this.embedded=s.EMBEDDED,this.isShown=!1,this.position=o.TOOLTIP_DEFAULT_POSITION,this.on=s.EVENT_ON,this.off=s.EVENT_OFF,this.duration=o.TOOLTIP_DURATION},_attachNode:function(){this.contentNode=this.rootNode.getElementsByClassName("popover-content")[0]},setPosition:function(t){var i=("string"==typeof t?t:"").toLowerCase();return s.POSITION_VALID[i]?(this.rootNode.classList.remove(this.position),this.position=i,void this.rootNode.classList.add(i)):void(this.rootNode.classList.contains(this.position)||(this.position=o.TOOLTIP_DEFAULT_POSITION,this.rootNode.classList.add(o.TOOLTIP_DEFAULT_POSITION)))},setParent:function(t){if(!t||t.nodeType!==document.ELEMENT_NODE)throw new Error("DomNode(ELEMENT_NODE)を指定してください。");this.parentNode=t},setOn:function(o){this._clearOn(),this.on="string"==typeof o?o:s.EVENT_ON,this.on&&t.addEvent(this.parentNode,this.on,this,"show")},_clearOn:function(){t.removeEvent(this.parentNode,this.on,this,"show")},setOff:function(o){this._clearOff(),this.off="string"==typeof o?o:s.EVENT_OFF,this.off&&t.addEvent(this.parentNode,this.off,this,"hide")},_clearOff:function(){t.removeEvent(this.parentNode,this.off,this,"hide")},setContent:function(o){if(!t.setDomContents(this.contentNode,o))throw new Error("ツールチップに表示するコンテンツを指定してください。")},show:function(){this.isShown||(this.isShown=!0,this.parentNode.parentElement?this.parentNode.parentElement.appendChild(this.rootNode):document.body.appendChild(this.rootNode),this.rootNode.style.display="block",setTimeout(function(){var i=this._calculatePosition();this.rootNode.style.top=i.top,this.rootNode.style.left=i.left,t.hasTransitionSupport()?this.rootNode.classList.add("in"):$(this.rootNode).animate({opacity:o.DEFAULT_VALUE_OPACITY_MAX},this.duration)}.bind(this),50))},hide:function(){this.isShown&&(this.isShown=!1,t.hasTransitionSupport()?this.rootNode.classList.remove("in"):$(this.rootNode).animate({opacity:o.DEFAULT_VALUE_OPACITY_MIN},this.duration),setTimeout(function(){this.rootNode.style.display="none";try{document.body.removeChild(this.rootNode)}catch(t){}}.bind(this),this.duration))},_calculatePosition:function(){var t,o,i,e,n,h,r,d,a={top:"",left:""};return this.position?(t=this._calculateParentRect(),o=this._calculateParentOffsetPos(),i=o.top,e=o.left,n={left:{top:i+t.height/2,left:e},right:{top:i+t.height/2,left:e+t.width},top:{top:i,left:e+t.width/2},bottom:{top:i+t.height,left:e+t.width/2}},h={height:this.rootNode.offsetHeight,width:this.rootNode.offsetWidth},r={left:{where:"width",size:11},right:{where:"width",size:11},top:{where:"height",size:11},bottom:{where:"height",size:11}},h[r[this.position].where]+=r[this.position].size,d={left:{top:-(h.height/2),left:-(h.width+s.MARGIN)},right:{top:-(h.height/2),left:s.MARGIN},top:{top:-(h.height+s.MARGIN),left:-(h.width/2)},bottom:{top:s.MARGIN,left:-(h.width/2)}},a={top:n[this.position].top+d[this.position].top+"px",left:n[this.position].left+d[this.position].left+"px"}):a},_calculateParentRect:function(){return this.parentNode.getClientRects().length?this.parentNode.getClientRects()[0]:{top:0,left:0,height:0,width:0}},_calculateParentOffsetPos:function(){return{top:this.parentNode.offsetTop,left:this.parentNode.offsetLeft}},_getId:function(){return s.ID_PREFIX+n++},getDuration:function(){return this.duration},destroy:function(){this._clearOn(),this._clearOff(),this._super()}})});