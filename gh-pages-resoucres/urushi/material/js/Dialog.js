define("Dialog",["jquery","Urushi","materialConfig","Panel","text!dialogTemplate"],function(e,t,o,i,s){"use strict";var d={EMBEDDED:{additionalClass:""},ID_PREFIX:"urushi.dialog"},n=0;return i.extend({template:void 0,embedded:void 0,parentNode:void 0,isShown:void 0,show:function(){var i;this.isShown||(this.isShown=!0,this.parentNode.classList.add("modal-open"),this._createUnderlay(),t.addEvent(this.rootNode,"keydown",this,"_onKeydown"),this.rootNode.style.display="block",setTimeout(function(){t.hasTransitionSupport()?(this.rootNode.classList.add("in"),this.underlayNode.classList.add("in")):(i=e(this.dialogNode).height()/2,e(this.rootNode).css({opacity:o.DEFAULT_VALUE_OPACITY_MIN}),e(this.dialogNode).css({"margin-top":o.DIALOG_POINT_WAITING-i}),e(this.underlayNode).css({opacity:o.DEFAULT_VALUE_OPACITY_MIN}),this.rootNode.classList.add("in"),e(this.rootNode).animate({opacity:o.DEFAULT_VALUE_OPACITY_MAX},o.DIALOG_ANIMATION_DURATION),e(this.dialogNode).animate({"margin-top":o.DIALOG_POINT_VIEW},o.DIALOG_ANIMATION_DURATION),e(this.underlayNode).animate({opacity:o.DEFAULT_VALUE_OPACITY_MAX},o.DIALOG_ANIMATION_DURATION)),this._enforceFocus()}.bind(this),o.DIALOG_ANIMATION_DELAY))},hide:function(){var i;this.isShown&&(this.isShown=!1,this.parentNode.classList.remove("modal-open"),t.removeEvent(this.rootNode,"keydown",this,"_onKeydown"),t.hasTransitionSupport()?(this.rootNode.classList.remove("in"),this.underlayNode.classList.remove("in")):(i=e(this.dialogNode).height()/2,e(this.rootNode).animate({opacity:o.DEFAULT_VALUE_OPACITY_MIN},o.DIALOG_ANIMATION_DURATION),e(this.dialogNode).animate({"margin-top":o.DIALOG_POINT_WAITING-i},{duration:o.DIALOG_ANIMATION_DURATION,complete:function(){this.rootNode.classList.remove("in")}.bind(this)}),e(this.underlayNode).animate({opacity:o.DEFAULT_VALUE_OPACITY_MIN},o.DIALOG_ANIMATION_DURATION)),setTimeout(function(){this.rootNode.style.display="none"}.bind(this),o.DIALOG_ANIMATION_DURATION))},setHeader:function(e){t.setDomContents(this.titleNode,e)&&this.titleNode.textContent?this.headerNode.classList.remove("hidden"):this.headerNode.classList.add("hidden")},displayCloseIcon:function(e){"boolean"==typeof e&&(e?this.closeIconNode.classList.remove("hidden"):this.closeIconNode.classList.add("hidden"))},_createUnderlay:function(){this.underlayNode.style.height=this.parentNode.offsetHeight,this.underlayNode.style.zIndex="auto",this.underlayNode.style.position="absolute"},_enforceFocus:function(){this.rootNode.focus()},_onKeydown:function(e){e.stopPropagation(),t.KEYCODE.ESCAPE===e.which-0&&this.hide()},_initProperties:function(e){this.template=s,this.embedded=d.EMBEDDED,this.parentNode=t.isElementNode(e.parentNode)?e.parentNode:o.DIALOG_PARENT_NODE,this.isShown=!1},initOption:function(e){this._super(e),this.rootNode.style.display="none",this.displayCloseIcon(!!e.isDisplayCloseIcon),t.addEvent(this.closeIconNode,"click",this,"hide"),o.DIALOG_UNDERLAY_CLICK_CLOSE&&t.addEvent(this.underlayNode,"click",this,"hide")},_attachNode:function(){this.dialogNode=this.rootNode.getElementsByClassName("modal-dialog")[0],this.headerNode=this.rootNode.getElementsByClassName("modal-header")[0],this.titleNode=this.rootNode.getElementsByClassName("modal-title")[0],this.closeIconNode=this.headerNode.getElementsByClassName("close")[0],this.underlayNode=this.rootNode.getElementsByClassName("modal-underlay")[0],this.contentNode=this.rootNode.getElementsByClassName("modal-body")[0],this.footerNode=this.rootNode.getElementsByClassName("modal-footer")[0]},_getId:function(){return d.ID_PREFIX+n++},destroy:function(){t.removeEvent(this.rootNode,"keydown",this,"_onKeydown"),t.removeEvent(this.closeIconNode,"click",this,"hide"),t.removeEvent(this.underlayNode,"click",this,"hide"),this._super()}})});