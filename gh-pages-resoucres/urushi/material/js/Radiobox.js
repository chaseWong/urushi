define("Radiobox",["jquery","Urushi","Base","text!radioboxTemplate"],function(e,t,i,n){"use strict";var o={ID_PREFIX:"urushi.Radiobox",EMBEDDED:{radioboxClass:"",additionalClass:"",value:"",label:"",checked:!1},INTERVAL:20,RIPPLE_SCALE_MAX:1,RIPPLE_OPACITY_MAX:.2,RIPPLE_SCALE_MIN:0,RIPPLE_OPACITY_MIN:0,CHECK_SCALE_MAX:.45,CHECK_OPACITY_MAX:1,CHECK_SCALE_MIN:0,CHECK_OPACITY_MIN:0,DEFAULTS:{DURATION:300}},s=0,a={};return i.extend({template:void 0,embedded:void 0,_initProperties:function(e){if(!e.name)throw new Error("Name is required.");this.template=n,this.embedded=o.EMBEDDED},initOption:function(e){t.hasTransitionSupport()||(a[e.name]=a[e.name]||{},a[e.name].map=a[e.name].map||{},a[e.name].checked=a[e.name].checked||void 0,a[e.name].map[this.id]=this,t.addEvent(this.inputNode,"click",this,"_onClick"))},getValue:function(){return this.inputNode.checked},setChecked:function(e){"boolean"==typeof e&&(this.inputNode.checked=e,t.hasTransitionSupport()||(e?this._checkOn():this._checkOff()))},_checkOn:function(){var t=0,i=o.RIPPLE_SCALE_MIN,n=o.RIPPLE_OPACITY_MIN,s=o.CHECK_SCALE_MIN,c=o.CHECK_OPACITY_MIN,d=o.INTERVAL/o.DEFAULTS.DURATION,r=e(this.rippleNode),E=e(this.checkNode),u=function(){t*o.INTERVAL<o.DEFAULTS.DURATION?setTimeout(function(){i+=o.RIPPLE_SCALE_MAX*d,n+=o.RIPPLE_OPACITY_MAX*d,s+=o.CHECK_SCALE_MAX*d,c+=o.CHECK_OPACITY_MAX*d,r.css({msTransform:"scale("+i+")",opacity:n}),E.css({msTransform:"scale("+s+")",opacity:c}),t++,u()},o.INTERVAL):setTimeout(function(){r.animate({msTransform:"scale("+o.CHECK_SCALE_MIN+")",opacity:o.CHECK_OPACITY_MIN},o.DEFAULTS.DURATION-100)},o.INTERVAL)};a[this.inputNode.name].checked=this.id,u()},_checkOff:function(){var t=0,i=o.CHECK_SCALE_MAX,n=o.CHECK_OPACITY_MAX,s=o.INTERVAL/o.DEFAULTS.DURATION,a=e(this.checkNode),c=function(){t*o.INTERVAL<o.DEFAULTS.DURATION&&setTimeout(function(){i-=o.CHECK_SCALE_MAX*s,n-=o.CHECK_OPACITY_MAX*s,a.css({msTransform:"scale("+i+")",opacity:n}),t++,c()},o.INTERVAL)};c()},_onClick:function(e){var i,n=this.inputNode.name;if(!t.hasTransitionSupport()&&a[n].checked!==this.id){for(i in a[n].map)if(a[n].checked===i){a[n].map[i].setChecked(!1);break}this.setChecked(!0)}},_attachNode:function(){this.inputNode=this.rootNode.getElementsByTagName("input")[0],this.rippleNode=this.rootNode.getElementsByClassName("ripple")[0],this.checkNode=this.rootNode.getElementsByClassName("check")[0]},_getId:function(){return o.ID_PREFIX+s++},getPropertyValue:function(){return this.inputNode.value},setPropertyValue:function(e){this.inputNode.value=e},setDisabled:function(e){return this._super(e)?(e?(this.inputNode.setAttribute("tabIndex","-1"),this.inputNode.setAttribute("disabled",!0)):(this.inputNode.removeAttribute("tabIndex"),this.inputNode.removeAttribute("disabled")),!0):!1}})});